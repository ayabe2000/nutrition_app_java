<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Dashboard</title>
</head>
<body>

<div>

    <h2>Welcome, <span th:text="${username}"></span>!</h2>

    <div th:if="${todayTotalNutrition != null}">
        <h4>選択した食品の栄養素情報 (100g当たり)</h4>
        <p><strong>カロリー(kcal):</strong> <span th:text="${todayTotalNutrition.energy}"></span></p>
        <p><strong>タンパク質 (g):</strong> <span th:text="${todayTotalNutrition.protein}"></span></p>
        <p><strong>脂質 (g):</strong> <span th:text="${todayTotalNutrition.fat}"></span></p>
        <p><strong>コレステロール (mg):</strong> <span th:text="${todayTotalNutrition.cholesterol}"></span></p>
        <p><strong>炭水化物 (g):</strong> <span th:text="${todayTotalNutrition.carbohydrates}"></span></p>
    </div>
    <form action="/dashboard" method="post">
        <label>Food:</label>
        <select name="food">
            <option th:each="food : ${foods}" th:if="${food != null}" th:value="${food.getFoodName}" th:text="${food.getFoodName}"></option>
        </select>
        <label>Grams:</label>
        <input type="number" name="grams" placeholder="Enter weight in grams" />
        <label>Date:</label>
        <input type="date" name="date" />
        <input type="submit" value="Add" />
        <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
    </form>

    <div th:if="${selectedNutrition != null}">
        <h4>選択した食品の栄養素情報 (100g当たり)</h4>
        <p><strong>カロリー(kcal):</strong> <span th:text="${selectedNutrition.energy}"></span></p>
        <p><strong>タンパク質 (g):</strong> <span th:text="${selectedNutrition.protein}"></span></p>
        <p><strong>脂質 (g):</strong> <span th:text="${selectedNutrition.fat}"></span></p>
        <p><strong>コレステロール (mg):</strong> <span th:text="${selectedNutrition.cholesterol}"></span></p>
        <p><strong>炭水化物 (g):</strong> <span th:text="${selectedNutrition.carbohydrates}"></span></p>
    </div>
    

    <table>
        
        <tr th:each="summary : ${summaries}">
            <td th:text="${summary.date}"></td>
            <td th:text="${summary.foodName}"></td>
            <td th:text="${summary.grams + 'g'}"></td>
            <td th:text="${summary.energySum}"></td>
            <td th:text="${summary.proteinSum}"></td>
            <td th:text="${summary.fatSum}"></td>
            <td th:text="${summary.cholesterolSum}"></td>
            <td th:text="${summary.carbohydratesSum}"></td>
        </tr>
        
    </table>

    <form action="/logout" method="post">
        <input type="submit" value="Logout" />
        <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
    </form>
</div>

</body>

</html>

